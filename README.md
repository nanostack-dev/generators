# Builder Pattern Generator

A Go code generator that automatically creates builder pattern implementations for structs.

## Installation

```shell
go install github.com/nanostack-dev/generators/builder@latest
```

## Usage

### Using go:generate

Add this comment above your struct:

```go
//go:generate go run github.com/nanostack-dev/generators/builder@latest gen -type Person -output person_builder.go
```

### Command Line

```shell
builder -file input.go -type Person -output person_builder.go -package mypackage
```

### Flags

| Flag | Description | Required | Default |
|------|-------------|----------|---------|
| `-file` | Input Go file containing the struct | Yes | - |
| `-type` | Name of the struct to generate a builder for | Yes | - |
| `-output` | Output file path for the generated builder | Yes | - |
| `-package` | Package name for the generated code | No | Same as input file |

## Example

Input struct:
```go
package model

//go:generate go run github.com/nanostack-dev/generators/builder@latest gen -type Person -output person_builder.go

type Person struct {
Name    string
Age     int
}
```

Generated builder:
```go
// Code generated by nanostack/generator; DO NOT EDIT.

package model

type PersonBuilder struct {
instance *Person
}

func NewPersonBuilder() *PersonBuilder {
return &PersonBuilder{instance: &Person{}}
}

func (p *Person) ToBuilder() *PersonBuilder {
if p == nil {
return NewPersonBuilder()
}
return &PersonBuilder{instance: &Person{Name: p.Name, Age: p.Age}}
}

func (b *PersonBuilder) WithName(name string) *PersonBuilder {
b.instance.Name = name
return b
}

func (b *PersonBuilder) WithAge(age int) *PersonBuilder {
b.instance.Age = age
return b
}

func (b *PersonBuilder) Build() *Person {
return b.instance
}
```

### Using the Generated Builder

```go
person := NewPersonBuilder().
WithName("John").
WithAge(30).
Build()

// Convert existing struct to builder
existingPerson := &Person{Name: "Jane", Age: 25}
updatedPerson := existingPerson.ToBuilder().
WithAge(26).
Build()
```

### Advanced Usage

You can use builder generator annotations to customize the output:

```go
package model

//go:generate go run github.com/nanostack-dev/generators/builder@latest gen -type Person -output person_builder.go

// Person represents a person entity
// @builder:prefix With // Customize prefix for setter methods (default: With)
// @builder:validate true // Enable validation on Build() method
type Person struct {
Name    string `validate:"required"`
Age     int    `validate:"gte=0,lte=150"`
}
```
